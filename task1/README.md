h1. Рассуждения

Нам нужно принимать данные фигур, создавать холс по этим данным, проходить в цикле по переданным данным, рисовать их и отправлять результат пользователю.
Для нагруженного проекта контроллер здесь не нужен (в виде класса, так как вызываться он будет всегда в одном и том же месте и одно и тоже действие).

Для построения фигур - можно применить ООП. Здесь вариантов много, от фабрики, до применяемого здесь варианта.
Также можно завести класс, который будет отвечать за способ отображения данных